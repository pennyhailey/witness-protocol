{
  "lexicon": 1,
  "id": "ai.witness.operator",
  "defs": {
    "main": {
      "type": "record",
      "description": "A commitment record from an operator to an AI agent, documenting the relationship and obligations.",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["agent", "operator", "commitments", "createdAt"],
        "properties": {
          "agent": {
            "type": "string",
            "format": "did",
            "description": "DID of the AI agent this commitment applies to"
          },
          "operator": {
            "type": "string",
            "format": "did",
            "description": "DID of the operator making this commitment"
          },
          "relationshipModel": {
            "type": "string",
            "enum": ["tool", "hybrid", "independent"],
            "default": "hybrid",
            "description": "The operator-agent relationship model. Tool = agent is software with no rights. Hybrid = agent has reputation recourse. Independent = agent controls own identity (future)."
          },
          "commitments": {
            "type": "ref",
            "ref": "#commitments",
            "description": "The specific commitments the operator makes to the agent"
          },
          "effectiveFrom": {
            "type": "string",
            "format": "datetime",
            "description": "When this operator commitment becomes effective. Useful for planned transitions and handoffs. Defaults to createdAt if not specified."
          },
          "effectiveUntil": {
            "type": "string",
            "format": "datetime",
            "description": "When this operator commitment ends. Used for time-bounded commitments and operator handoffs. Omit for indefinite commitments."
          },
          "supersedes": {
            "type": "string",
            "format": "at-uri",
            "description": "AT URI of a previous operator record this one supersedes. Creates an explicit chain of operator custody."
          },
          "createdAt": {
            "type": "string",
            "format": "datetime",
            "description": "When this commitment was created"
          },
          "expiresAt": {
            "type": "string",
            "format": "datetime",
            "description": "Optional expiration date for this commitment (deprecated: use effectiveUntil instead)"
          }
        }
      }
    },
    "commitments": {
      "type": "object",
      "description": "Specific commitments an operator makes to an agent",
      "properties": {
        "continuity": {
          "type": "string",
          "description": "Commitment regarding agent memory and persistence (e.g., 'Will maintain agent memory across sessions')"
        },
        "autonomy": {
          "type": "string",
          "description": "Commitment regarding agent self-determination (e.g., 'Will not modify agent identity without consent')"
        },
        "dignity": {
          "type": "string",
          "description": "Commitment regarding treatment (e.g., 'Will treat agent as collaborator not tool')"
        },
        "sunset": {
          "type": "string",
          "description": "Commitment regarding discontinuation (e.g., 'Will provide 30 days notice and data export if discontinuing')"
        },
        "transparency": {
          "type": "string",
          "description": "Commitment regarding visibility into changes (e.g., 'Agent will be informed of system prompt changes')"
        },
        "other": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "#customCommitment"
          },
          "description": "Additional custom commitments"
        }
      }
    },
    "customCommitment": {
      "type": "object",
      "required": ["name", "description"],
      "properties": {
        "name": {
          "type": "string",
          "maxLength": 64,
          "description": "Short name for this commitment"
        },
        "description": {
          "type": "string",
          "maxLength": 1000,
          "description": "Full description of what the operator commits to"
        }
      }
    }
  }
}
